<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>MK Electric - CAD REBT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com"></script>
</head>
<body class="bg-slate-900 text-slate-200 overflow-hidden">
    <header class="h-16 bg-slate-800 border-b border-slate-700 flex items-center justify-between px-6">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center font-bold text-yellow-500 border-2 border-slate-400">MK</div>
            <h1 class="font-bold uppercase tracking-widest">MK <span class="text-yellow-500 text-sm">Electric CAD</span></h1>
        </div>
        <button onclick="canvas.clear(); canvas.backgroundColor='#fff'; canvas.renderAll()" class="bg-red-600 px-3 py-1 rounded text-xs hover:bg-red-500">Limpiar Todo</button>
    </header>

    <main class="flex h-[calc(100vh-64px)]">
        <aside class="w-64 bg-slate-800 p-4 border-r border-slate-700 space-y-4 overflow-y-auto">
            <h2 class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Protecciones REBT</h2>
            <div class="grid grid-cols-2 gap-2">
                <button onclick="addObj('IGA', '#ef4444')" class="bg-slate-700 p-2 rounded text-[10px] hover:bg-yellow-600 transition">IGA</button>
                <button onclick="addObj('ID', '#f59e0b')" class="bg-slate-700 p-2 rounded text-[10px] hover:bg-yellow-600 transition">ID</button>
                <button onclick="addObj('C1', '#3b82f6')" class="bg-blue-900 p-2 rounded text-[10px] hover:bg-yellow-600">LUZ (C1)</button>
                <button onclick="addObj('C2', '#10b981')" class="bg-green-900 p-2 rounded text-[10px] hover:bg-yellow-600">TOMA (C2)</button>
            </div>
            <h2 class="text-[10px] font-bold text-slate-500 uppercase tracking-widest pt-4">Cableado (Colores)</h2>
            <button onclick="addCable('#92400e')" class="w-full bg-amber-900/50 border border-amber-700 p-2 rounded text-[10px] text-left">Fase (Marrón)</button>
            <button onclick="addCable('#1e40af')" class="w-full bg-blue-900/50 border border-blue-700 p-2 rounded text-[10px] text-left">Neutro (Azul)</button>
            <button onclick="addCable('#166534')" class="w-full bg-green-900/50 border border-green-700 p-2 rounded text-[10px] text-left">Tierra (Verde/Amar.)</button>
        </aside>

        <section class="flex-1 bg-slate-700 p-8 flex justify-center items-center relative">
            <canvas id="c" class="shadow-2xl rounded-lg"></canvas>
            <div id="tip" class="absolute bg-black/90 text-white p-2 rounded text-[10px] hidden pointer-events-none border border-slate-600 shadow-xl"></div>
        </section>

        <aside class="w-64 bg-slate-800 p-4 border-l border-slate-700">
            <h2 class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-4">Arquitectura</h2>
            <button onclick="addWall()" class="w-full bg-slate-600 p-2 rounded text-[10px] hover:bg-slate-500">Dibujar Pared (m)</button>
        </aside>
    </main>

    <script>
        const canvas = new fabric.Canvas('c', { width: 800, height: 600, backgroundColor: '#fff' });
        const tip = document.getElementById('tip');

        function addObj(type, color) {
            const group = new fabric.Group(, { left: 100, top: 100, data: { info: `Componente: ${type} - Normativa REBT` } });
            canvas.add(group);
        }

        function addCable(color) {
            const line = new fabric.Line([50, 50, 200, 50], {
                stroke: color, strokeWidth: 4, strokeLineCap: 'round',
                data: { info: `Cable REBT. Color: ${color === '#92400e' ? 'Marrón (Fase)' : color === '#1e40af' ? 'Azul (Neutro)' : 'Verde/Amarillo (Tierra)'}` }
            });
            canvas.add(line);
        }

        function addWall() {
            const wall = new fabric.Rect({ 
                left: 200, top: 200, width: 200, height: 12, fill: '#334155',
                data: { info: 'Elemento Arquitectónico: Pared (2.00m)' }
            });
            canvas.add(wall);
        }

        canvas.on('mouse:over', (e) => {
            if (e.target && e.target.data) {
                tip.style.display = 'block';
                tip.innerHTML = e.target.data.info;
            }
        });
        canvas.on('mouse:move', (e) => {
            if (tip.style.display === 'block') {
                tip.style.left = (e.e.clientX - 150) + 'px';
                tip.style.top = (e.e.clientY - 120) + 'px';
            }
        });
        canvas.on('mouse:out', () => tip.style.display = 'none');
    </script>
</body>
</html>
