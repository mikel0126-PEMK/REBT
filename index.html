<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>MK ELECTRIC CAD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com"></script>
</head>
<body class="bg-[#1a2233] text-slate-300 overflow-hidden">

    <header class="h-16 bg-[#111827] flex items-center justify-between px-6 border-b border-slate-800">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center font-bold text-yellow-500 text-xl border-2 border-yellow-500">MK</div>
            <h1 class="font-bold text-white uppercase text-sm tracking-widest">MK Electric CAD</h1>
        </div>
        <button onclick="location.reload()" class="bg-red-600 px-4 py-1 rounded text-[10px] text-white font-bold">REINICIAR</button>
    </header>

    <main class="flex h-[calc(100vh-64px)]">
        <aside class="w-64 bg-[#111827] p-4 border-r border-slate-800 space-y-6">
            <h2 class="text-[10px] text-slate-500 font-bold uppercase mb-3">Componentes</h2>
            <div class="grid grid-cols-2 gap-2">
                <button onclick="addRect('IGA', '#ef4444')" class="bg-slate-800 p-2 rounded text-[10px] hover:bg-slate-700">IGA</button>
                <button onclick="addRect('ID', '#f59e0b')" class="bg-slate-800 p-2 rounded text-[10px] hover:bg-slate-700">ID</button>
            </div>
            <h2 class="text-[10px] text-slate-500 font-bold uppercase mt-6 mb-3">Cables</h2>
            <button onclick="addLine('#92400e')" class="w-full bg-amber-900/30 p-2 rounded text-[10px] text-left">Fase (Marrón)</button>
        </aside>

        <section class="flex-1 bg-[#1a2233] p-8 flex justify-center items-center">
            <canvas id="c" width="600" height="400" style="background:#fff; border: 5px solid #334155; border-radius: 8px;"></canvas>
        </section>
    </main>

    <script>
        // Forzamos la creación del lienzo al cargar
        var canvas;
        window.addEventListener('load', function() {
            canvas = new fabric.Canvas('c');
            console.log("Motor listo");
        });

        function addRect(label, color) {
            if(!canvas) return;
            var rect = new fabric.Rect({ width: 80, height: 45, fill: color, rx: 5, ry: 5 });
            var text = new fabric.Text(label, { fontSize: 14, fill: '#fff', left: 20, top: 12, fontWeight: 'bold' });
            var group = new fabric.Group(, { left: 100, top: 100 });
            canvas.add(group);
            canvas.renderAll();
        }

        function addLine(color) {
            if(!canvas) return;
            var line = new fabric.Line(, { stroke: color, strokeWidth: 5 });
            canvas.add(line);
            canvas.renderAll();
        }
    </script>
</body>
</html>
